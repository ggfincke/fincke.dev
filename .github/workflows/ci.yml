# name: CI
# 
# on:
#   push:
#     branches: [main, dev]
#   pull_request:
#     branches: [main, dev]
# 
# jobs:
#   lint-and-typecheck:
#     runs-on: ubuntu-latest
#     name: Lint & Type Check
# 
#     steps:
#       - name: Checkout
#         uses: actions/checkout@v4
# 
#       - name: Setup Node.js
#         uses: actions/setup-node@v4
#         with:
#           node-version: '20'
#           cache: 'npm'
# 
#       - name: Install dependencies
#         run: npm ci
# 
#       - name: Run ESLint
#         run: npm run lint
# 
#       - name: Run TypeScript type check
#         run: npm run typecheck
# 
#   build:
#     runs-on: ubuntu-latest
#     name: Build & Bundle Analysis
# 
#     steps:
#       - name: Checkout
#         uses: actions/checkout@v4
# 
#       - name: Setup Node.js
#         uses: actions/setup-node@v4
#         with:
#           node-version: '20'
#           cache: 'npm'
# 
#       - name: Install dependencies
#         run: npm ci
# 
#       - name: Build application
#         run: npm run build
# 
#       - name: Analyze bundle size
#         run: |
#           echo "## Bundle Size Analysis ðŸ“Š" >> $GITHUB_STEP_SUMMARY
#           echo "" >> $GITHUB_STEP_SUMMARY
#           echo "\`\`\`" >> $GITHUB_STEP_SUMMARY
#           npx next-bundle-analyzer || echo "Bundle analysis completed"
#           echo "\`\`\`" >> $GITHUB_STEP_SUMMARY
# 
# 
#   lighthouse:
#     runs-on: ubuntu-latest
#     name: Lighthouse CI
#     needs: build
#     if: needs.build.result == 'success'
# 
#     steps:
#       - name: Checkout
#         uses: actions/checkout@v4
# 
#       - name: Setup Node.js
#         uses: actions/setup-node@v4
#         with:
#           node-version: '20'
#           cache: 'npm'
# 
#       - name: Install dependencies
#         run: npm ci
# 
#       - name: Build application
#         run: npm run build
# 
#       - name: Run Lighthouse CI
#         run: npx @lhci/cli@latest autorun
#         env:
#           LHCI_GITHUB_APP_TOKEN: ${{ secrets.GITHUB_TOKEN }}
# 
#       - name: Upload Lighthouse results
#         uses: actions/upload-artifact@v4
#         if: always() && hashFiles('.lighthouseci/**') != ''
#         with:
#           name: lighthouse-results
#           path: .lighthouseci/
#           retention-days: 7
# 
#   status-check:
#     runs-on: ubuntu-latest
#     name: Status Check
#     needs: [lint-and-typecheck, build, lighthouse]
#     if: always()
# 
#     steps:
#       - name: Check job status
#         run: |
#           echo "## CI Pipeline Results ðŸš€" >> $GITHUB_STEP_SUMMARY
#           echo "" >> $GITHUB_STEP_SUMMARY
#           
#           if [[ "${{ needs.lint-and-typecheck.result }}" == "success" ]]; then
#             echo "âœ… Lint & Type Check: Passed" >> $GITHUB_STEP_SUMMARY
#           else
#             echo "âŒ Lint & Type Check: Failed" >> $GITHUB_STEP_SUMMARY
#           fi
#           
#           if [[ "${{ needs.build.result }}" == "success" ]]; then
#             echo "âœ… Build: Passed" >> $GITHUB_STEP_SUMMARY
#           else
#             echo "âŒ Build: Failed" >> $GITHUB_STEP_SUMMARY
#           fi
#           
#           if [[ "${{ needs.lighthouse.result }}" == "success" ]]; then
#             echo "âœ… Lighthouse CI: Passed" >> $GITHUB_STEP_SUMMARY
#           else
#             echo "âŒ Lighthouse CI: Failed" >> $GITHUB_STEP_SUMMARY
#           fi
# 
#       - name: Fail if any job failed
#         if: needs.lint-and-typecheck.result == 'failure' || needs.build.result == 'failure' || needs.lighthouse.result == 'failure'
#         run: exit 1
